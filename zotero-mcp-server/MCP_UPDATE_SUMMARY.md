# Zotero MCP Server v1.1.0 æ›´æ–°è¯´æ˜

## ğŸš€ ä¸»è¦æ›´æ–°

### 1. æ³¨é‡Šæœç´¢å·¥å…·å¢å¼º (`search_annotations`)

#### æ–°å¢å‚æ•°ï¼š
- **`detailed`**: æ§åˆ¶å†…å®¹è¯¦ç»†ç¨‹åº¦
  - `false`ï¼ˆé»˜è®¤ï¼‰: é¢„è§ˆæ¨¡å¼ï¼Œå†…å®¹æˆªæ–­ + å…³é”®è¯
  - `true`: è¯¦ç»†æ¨¡å¼ï¼Œè¿”å›å®Œæ•´å†…å®¹
- **ä¼˜åŒ–åˆ†é¡µ**:
  - é¢„è§ˆæ¨¡å¼ï¼šé»˜è®¤20æ¡ï¼Œæœ€å¤§100æ¡
  - è¯¦ç»†æ¨¡å¼ï¼šé»˜è®¤50æ¡ï¼Œæœ€å¤§200æ¡

#### æ”¹è¿›æè¿°ï¼š
```typescript
"Search all notes, PDF annotations and highlights in the Zotero library. 
Returns metadata first (pagination, total count, search time) followed by results. 
Use preview mode (default) for overview, detailed mode for full content."
```

### 2. æ–‡çŒ®ç¬”è®°å·¥å…·æ›´æ–° (`get_item_notes`)

#### æ–°å¢åŠŸèƒ½ï¼š
- **åˆ†é¡µæ”¯æŒ**: `limit` (æœ€å¤§100, é»˜è®¤20) å’Œ `offset` å‚æ•°
- **å…ƒæ•°æ®ä¼˜å…ˆ**: è¿”å›æ ¼å¼ä¼˜åŒ–ï¼Œç»Ÿè®¡ä¿¡æ¯åœ¨å‰

#### æ–°å‚æ•°ï¼š
```typescript
{
  itemKey: string,      // æ–‡çŒ®ID
  limit?: string,       // è¿”å›æ•°é‡é™åˆ¶  
  offset?: string       // åˆ†é¡µåç§»é‡
}
```

### 3. æ–‡çŒ®æ³¨é‡Šå·¥å…·æ›´æ–° (`get_item_annotations`)

#### æ–°å¢åŠŸèƒ½ï¼š
- **åˆ†é¡µæ”¯æŒ**: æ·»åŠ  `limit` å’Œ `offset` å‚æ•°
- **æŒ‰ä½ç½®æ’åº**: ç»“æœæŒ‰é¡µé¢ä½ç½®è‡ªåŠ¨æ’åº
- **å…ƒæ•°æ®ä¼˜å…ˆ**: ç»Ÿä¸€çš„å“åº”æ ¼å¼

### 4. æ–°å¢ç²¾å‡†æ£€ç´¢å·¥å…·

#### å·¥å…·ä¸€ï¼š`get_annotation_by_id`
- **åŠŸèƒ½**: æŒ‰IDè·å–å•ä¸ªæ³¨é‡Šçš„å®Œæ•´å†…å®¹
- **å‚æ•°**: `annotationId` (string)
- **ç”¨é€”**: ä»é¢„è§ˆç»“æœä¸­ç²¾å‡†è·å–æ„Ÿå…´è¶£çš„å®Œæ•´å†…å®¹

#### å·¥å…·äºŒï¼š`get_annotations_batch`
- **åŠŸèƒ½**: æ‰¹é‡è·å–å¤šä¸ªæ³¨é‡Šçš„å®Œæ•´å†…å®¹
- **å‚æ•°**: `ids` (string[])
- **ç”¨é€”**: ä¸€æ¬¡æ€§è·å–å¤šä¸ªæ³¨é‡Šçš„è¯¦ç»†ä¿¡æ¯

## ğŸ“Š APIå“åº”æ ¼å¼ä¼˜åŒ–

### å…ƒæ•°æ®ä¼˜å…ˆçš„ç»Ÿä¸€æ ¼å¼ï¼š
```json
{
  "pagination": {
    "limit": 20,
    "offset": 0, 
    "total": 98,
    "hasMore": true
  },
  "searchTime": "45ms",
  "totalCount": 98,
  "contentMode": "preview",
  "version": "2.0",
  "endpoint": "annotations/search",
  "results": [...]  // å®é™…æ•°æ®
}
```

## ğŸ¯ æ¨èä½¿ç”¨æµç¨‹

### 1. é«˜æ•ˆçš„æ³¨é‡Šæ£€ç´¢æµç¨‹ï¼š
```
1. search_annotations (previewæ¨¡å¼) â†’ äº†è§£å…¨è²Œ
2. åˆ†æpagination.hasMore â†’ åˆ¤æ–­æ˜¯å¦éœ€è¦æ›´å¤šæ•°æ®  
3. get_annotation_by_id â†’ è·å–æ„Ÿå…´è¶£çš„å®Œæ•´å†…å®¹
4. get_annotations_batch â†’ æ‰¹é‡è·å–å¤šä¸ªè¯¦ç»†å†…å®¹
```

### 2. åˆ†é¡µç­–ç•¥ï¼š
```
# åˆå§‹æ¦‚è§ˆ
search_annotations?q=keyword&limit=20

# éœ€è¦æ›´å¤šç»“æœ
search_annotations?q=keyword&limit=20&offset=20

# éœ€è¦è¯¦ç»†å†…å®¹  
search_annotations?q=keyword&detailed=true&limit=10
```

## ğŸ”§ å·¥å…·æ€»è§ˆ

| å·¥å…·å | ç”¨é€” | ä¸»è¦ç‰¹æ€§ |
|--------|------|----------|
| `search` | æ–‡çŒ®æœç´¢ | é«˜çº§æœç´¢å‚æ•°ï¼Œç›¸å…³æ€§è¯„åˆ† |
| `search_annotations` | æ³¨é‡Šæœç´¢ | é¢„è§ˆ/è¯¦ç»†æ¨¡å¼ï¼Œæ™ºèƒ½åˆ†é¡µ |
| `get_item_notes` | æ–‡çŒ®ç¬”è®° | åˆ†é¡µæ”¯æŒï¼Œå…ƒæ•°æ®ä¼˜å…ˆ |
| `get_item_annotations` | æ–‡çŒ®æ³¨é‡Š | åˆ†é¡µ + è¿‡æ»¤ï¼Œä½ç½®æ’åº |
| `get_annotation_by_id` | ç²¾å‡†æ£€ç´¢ | æŒ‰IDè·å–å®Œæ•´å†…å®¹ |
| `get_annotations_batch` | æ‰¹é‡æ£€ç´¢ | ä¸€æ¬¡è·å–å¤šä¸ªå®Œæ•´å†…å®¹ |

## ğŸ’¡ æ€§èƒ½ä¼˜åŒ–

1. **Tokenå‹å¥½**: é¢„è§ˆæ¨¡å¼å‡å°‘80%çš„æ•°æ®ä¼ è¾“
2. **æ¸è¿›å¼åŠ è½½**: ä»æ¦‚è§ˆåˆ°è¯¦ç»†çš„æ™ºèƒ½è·å–è·¯å¾„
3. **åˆç†åˆ†é¡µ**: æ ¹æ®æ¨¡å¼è‡ªåŠ¨è°ƒæ•´é»˜è®¤å¤§å°
4. **å…ƒæ•°æ®ä¼˜å…ˆ**: AIå¯å¿«é€Ÿè¯„ä¼°æ•°æ®è§„æ¨¡å’Œè´¨é‡

## ğŸ”„ å‘åå…¼å®¹æ€§

- æ‰€æœ‰ç°æœ‰å‚æ•°ä¿æŒå…¼å®¹
- æ–°å‚æ•°å‡ä¸ºå¯é€‰ï¼Œä¸å½±å“ç°æœ‰ä½¿ç”¨
- APIå“åº”æ ¼å¼å¢å¼ºä½†ä¿æŒå‘åå…¼å®¹

æ­¤æ›´æ–°æ˜¾è‘—æå‡äº†MCPæœåŠ¡å™¨å¤„ç†å¤§é‡æ³¨é‡Šæ•°æ®çš„èƒ½åŠ›ï¼Œä¸ºAIæä¾›äº†æ›´é«˜æ•ˆçš„ä¿¡æ¯è·å–å’Œå¤„ç†ä½“éªŒã€‚