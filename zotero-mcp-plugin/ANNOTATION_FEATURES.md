# æ³¨é‡Šå’Œç¬”è®°æ£€ç´¢åŠŸèƒ½æ–‡æ¡£

Zotero MCP Plugin æ–°å¢äº†å¼ºå¤§çš„æ³¨é‡Šã€ç¬”è®°å’Œé«˜äº®å†…å®¹æ£€ç´¢åŠŸèƒ½ï¼Œè®©æ‚¨èƒ½å¤Ÿå¿«é€Ÿè®¿é—®å’Œæœç´¢æ‚¨çš„ç ”ç©¶ç¬”è®°ã€‚

## ğŸš€ ä¸»è¦åŠŸèƒ½

### 1. ç¬”è®°æ£€ç´¢

- è·å–æ‰€æœ‰ç¬”è®°æˆ–ç‰¹å®šæ–‡çŒ®çš„ç¬”è®°
- æ”¯æŒç¬”è®°å†…å®¹å…¨æ–‡æœç´¢
- æŒ‰æ—¥æœŸã€æ ‡ç­¾ç­‰æ¡ä»¶è¿‡æ»¤

### 2. PDFæ³¨é‡Šå’Œé«˜äº®

- æå–PDFä¸­çš„é«˜äº®å†…å®¹
- è·å–ç”¨æˆ·æ·»åŠ çš„æ³¨é‡Šè¯„è®º
- æ”¯æŒæŒ‰é¢œè‰²ã€é¡µç ã€ç±»å‹è¿‡æ»¤
- æŒ‰é¡µé¢ä½ç½®è‡ªåŠ¨æ’åº

### 3. ç»Ÿä¸€æœç´¢

- è·¨ç¬”è®°å’Œæ³¨é‡Šçš„å…¨æ–‡æœç´¢
- æ”¯æŒå¤šç§è¿‡æ»¤æ¡ä»¶ç»„åˆ
- çµæ´»çš„æ’åºå’Œåˆ†é¡µ

## ğŸ“– API ç«¯ç‚¹

### æœç´¢æ‰€æœ‰æ³¨é‡Š

```
GET /annotations/search?q=å…³é”®è¯&type=highlight,note&limit=20
```

**å‚æ•°:**

- `q`: æœç´¢å…³é”®è¯ï¼ˆåœ¨å†…å®¹ã€è¯„è®ºã€æ ‡ç­¾ä¸­æœç´¢ï¼‰
- `type`: æ³¨é‡Šç±»å‹è¿‡æ»¤ (`note|highlight|annotation|ink|text|image`)
- `tags`: æ ‡ç­¾è¿‡æ»¤ï¼ˆé€—å·åˆ†éš”ï¼‰
- `color`: é¢œè‰²è¿‡æ»¤ï¼ˆé€‚ç”¨äºé«˜äº®ï¼‰
- `hasComment`: æ˜¯å¦æœ‰è¯„è®º (`true|false`)
- `dateRange`: æ—¥æœŸèŒƒå›´ (`2023-01-01,2023-12-31`)
- `itemKey`: é™åˆ¶åˆ°ç‰¹å®šæ–‡çŒ®
- `sort`: æ’åºæ–¹å¼ (`dateAdded|dateModified|position`)
- `direction`: æ’åºæ–¹å‘ (`asc|desc`)
- `limit`: ç»“æœæ•°é‡é™åˆ¶ï¼ˆæœ€å¤§200ï¼‰
- `offset`: åˆ†é¡µåç§»é‡

### è·å–æ–‡çŒ®ç¬”è®°

```
GET /items/{itemKey}/notes
```

è·å–ç‰¹å®šæ–‡çŒ®çš„æ‰€æœ‰ç¬”è®°å†…å®¹ã€‚

### è·å–æ–‡çŒ®æ³¨é‡Š

```
GET /items/{itemKey}/annotations?type=highlight&color=yellow
```

è·å–ç‰¹å®šæ–‡çŒ®PDFä¸­çš„æ³¨é‡Šå’Œé«˜äº®ï¼Œæ”¯æŒç±»å‹å’Œé¢œè‰²è¿‡æ»¤ã€‚

### æµ‹è¯•åŠŸèƒ½

```
GET /test/annotations
```

è¿è¡Œæ³¨é‡ŠåŠŸèƒ½çš„å®Œæ•´æµ‹è¯•å¥—ä»¶ã€‚

## ğŸ“Š å“åº”æ ¼å¼

### æœç´¢å“åº”

```json
{
  "results": [
    {
      "id": "ABCD1234",
      "itemKey": "ABCD1234",
      "parentKey": "EFGH5678",
      "type": "highlight",
      "content": "è¿™æ˜¯é‡è¦çš„å†…å®¹",
      "text": "åŸå§‹é«˜äº®æ–‡æœ¬",
      "comment": "æˆ‘çš„è¯„è®º",
      "color": "yellow",
      "tags": ["é‡è¦", "ç†è®º"],
      "dateAdded": "2023-01-01T12:00:00.000Z",
      "dateModified": "2023-01-02T12:00:00.000Z",
      "page": 15,
      "sortIndex": 100
    }
  ],
  "pagination": {
    "limit": 20,
    "offset": 0,
    "total": 150,
    "hasMore": true
  },
  "searchTime": "45ms",
  "totalCount": 150,
  "version": "2.0",
  "endpoint": "annotations/search"
}
```

### æ³¨é‡Šå¯¹è±¡å­—æ®µ

| å­—æ®µ           | ç±»å‹     | æè¿°                        |
| -------------- | -------- | --------------------------- |
| `id`           | string   | æ³¨é‡Šå”¯ä¸€ID                  |
| `itemKey`      | string   | æ–‡çŒ®Key                     |
| `parentKey`    | string   | çˆ¶æ–‡çŒ®Keyï¼ˆå¦‚æœæ˜¯é™„ä»¶æ³¨é‡Šï¼‰ |
| `type`         | string   | æ³¨é‡Šç±»å‹                    |
| `content`      | string   | æ³¨é‡Šå†…å®¹ï¼ˆè¯„è®ºæˆ–æ–‡æœ¬ï¼‰      |
| `text`         | string   | åŸå§‹æ–‡æœ¬ï¼ˆé«˜äº®å†…å®¹ï¼‰        |
| `comment`      | string   | ç”¨æˆ·è¯„è®º                    |
| `color`        | string   | é«˜äº®é¢œè‰²                    |
| `tags`         | string[] | æ ‡ç­¾åˆ—è¡¨                    |
| `dateAdded`    | string   | åˆ›å»ºæ—¥æœŸ                    |
| `dateModified` | string   | ä¿®æ”¹æ—¥æœŸ                    |
| `page`         | number   | é¡µç ï¼ˆPDFæ³¨é‡Šï¼‰             |
| `sortIndex`    | number   | é¡µé¢å†…ä½ç½®ç´¢å¼•              |

## ğŸ”§ ä½¿ç”¨ç¤ºä¾‹

### æœç´¢åŒ…å«ç‰¹å®šå…³é”®è¯çš„é«˜äº®

```bash
curl "http://localhost:23119/annotations/search?q=æœºå™¨å­¦ä¹ &type=highlight&limit=10"
```

### è·å–å¸¦è¯„è®ºçš„æ³¨é‡Š

```bash
curl "http://localhost:23119/annotations/search?hasComment=true&sort=dateModified&direction=desc"
```

### æœç´¢ç‰¹å®šé¢œè‰²çš„é«˜äº®

```bash
curl "http://localhost:23119/annotations/search?type=highlight&color=red&limit=20"
```

### è·å–æ–‡çŒ®çš„æ‰€æœ‰ç¬”è®°

```bash
curl "http://localhost:23119/items/ABCD1234/notes"
```

### è·å–PDFä¸­çš„æ³¨é‡Šï¼ˆæŒ‰é¡µé¢æ’åºï¼‰

```bash
curl "http://localhost:23119/items/ABCD1234/annotations"
```

### æœç´¢æœ€è¿‘æ·»åŠ çš„æ³¨é‡Š

```bash
curl "http://localhost:23119/annotations/search?dateRange=2023-12-01,2023-12-31&sort=dateAdded&direction=desc"
```

## ğŸ’¡ ä½¿ç”¨æŠ€å·§

### 1. ç»„åˆæœç´¢

```bash
# æœç´¢åŒ…å«"æ·±åº¦å­¦ä¹ "ä¸”æœ‰è¯„è®ºçš„é»„è‰²é«˜äº®
curl "http://localhost:23119/annotations/search?q=æ·±åº¦å­¦ä¹ &type=highlight&color=yellow&hasComment=true"
```

### 2. æŒ‰ä½ç½®æµè§ˆPDFæ³¨é‡Š

```bash
# è·å–æ–‡çŒ®çš„PDFæ³¨é‡Šï¼ŒæŒ‰é¡µé¢ä½ç½®æ’åº
curl "http://localhost:23119/items/ABCD1234/annotations?sort=position&direction=asc"
```

### 3. æŸ¥æ‰¾é‡è¦ç¬”è®°

```bash
# æœç´¢æ ‡è®°ä¸º"é‡è¦"æ ‡ç­¾çš„æ³¨é‡Š
curl "http://localhost:23119/annotations/search?tags=é‡è¦&sort=dateModified&direction=desc"
```

## ğŸ¯ æ”¯æŒçš„æ³¨é‡Šç±»å‹

- **`note`**: ç‹¬ç«‹ç¬”è®°æˆ–æ–‡çŒ®ç¬”è®°
- **`highlight`**: PDFé«˜äº®å†…å®¹
- **`annotation`**: ä¸€èˆ¬æ³¨é‡Š
- **`text`**: æ–‡æœ¬æ³¨é‡Šï¼ˆPDFï¼‰
- **`ink`**: æ‰‹ç»˜æ³¨é‡Š
- **`image`**: å›¾åƒæ³¨é‡Š

## ğŸŒŸ é«˜çº§ç‰¹æ€§

### 1. æ™ºèƒ½å†…å®¹æå–

- è‡ªåŠ¨æå–HTMLç¬”è®°çš„çº¯æ–‡æœ¬å†…å®¹
- ä¿ç•™åŸå§‹æ ¼å¼åŒ–å†…å®¹ä¾›è¯¦ç»†æŸ¥çœ‹

### 2. ä½ç½®ä¿¡æ¯

- PDFæ³¨é‡Šè‡ªåŠ¨æŒ‰é¡µç å’Œä½ç½®æ’åº
- æ”¯æŒæŒ‰é˜…è¯»é¡ºåºæµè§ˆæ³¨é‡Š

### 3. æ ‡ç­¾æ•´åˆ

- æ³¨é‡Šæ ‡ç­¾ä¸Zoteroæ ‡ç­¾ç³»ç»Ÿå®Œå…¨æ•´åˆ
- æ”¯æŒæ ‡ç­¾çš„æ¨¡ç³ŠåŒ¹é…å’Œç²¾ç¡®åŒ¹é…

### 4. æ€§èƒ½ä¼˜åŒ–

- å¤§é‡æ³¨é‡Šçš„é«˜æ•ˆå¤„ç†
- æ™ºèƒ½ç¼“å­˜å’Œåˆ†é¡µæœºåˆ¶

é€šè¿‡è¿™äº›åŠŸèƒ½ï¼Œæ‚¨å¯ä»¥æ›´å¥½åœ°ç®¡ç†å’Œåˆ©ç”¨åœ¨Zoteroä¸­ç§¯ç´¯çš„ç ”ç©¶ç¬”è®°å’Œæ³¨é‡Šï¼Œæå‡ç ”ç©¶æ•ˆç‡ï¼
